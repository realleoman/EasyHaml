namespace :asset_files do
    desc "Create asset file for a library assets"
    task :create_asset_file_for_library_asset => :environment do
      @assets = Asset.find(:all, :conditions => ["current_version > ?", 0])
      @assets.each do |asset|
        if asset.asset_files[0] == nil then   
          i = 0
          asset.current_version.times do
            i+= 1
            asset_file = AssetFile.new
            asset_file.file_name = asset.id.to_s + "_" + i.to_s + ".pdf"
            asset_file.version = i
            asset_file.pages = 1
            asset_file.created_by = 1
            asset_file.updated_by = 1
            asset_file.generated_preview = 1
            asset_file.original_name = asset_file.file_name
            asset.asset_files << asset_file
            asset.save
          end
        end
      end
    end
end